!function(e){"use strict";var t=function(e,t){this.init(e,t)};t.prototype={init:function(t,i){var s=this;return s.settings=e.extend(e.fn.gifscratcher.defaults,i),s.images=s.settings.images,s.preloadImages=[],s.$el=e(t),s.$image=s.$el.find("img"),s.elWidth=0,s.elHeight=0,s.elPos=s.$el.offset(),s.iAuto=0,s.oldFrame=0,s.touchOnThis=!1,s.isActive=!1,s.isTouchDevice=!1,s.$image.load(function(){s.elWidth=s.$el.width(),s.elHeight=s.$el.height()}),s.images&&(s.$el.addClass("gifscratcher"),s.$image.addClass("gifscratcher-img"),s.preload(s.images),s.settings.auto===!0?s.auto(s.settings.speed):(s.resize(),s.hover(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(s.touchInteraction(),s.isTouch=!0,s.$image.addClass("gifscratcher-touch")):s.settings.drag===!0?(s.addCursor(),s.dragInteraction(),s.$image.addClass("gifscratcher-drag")):(s.addCursor(),s.hoverInteraction(),s.$image.addClass("gifscratcher-hover")))),this},addCursor:function(){var t=this;return t.$cursor=e("<div></div>").addClass("gifscratcher-cursor").appendTo(t.$el),this},preload:function(e){var t=this;t.preloadImages.list||(t.preloadImages.list=[]);for(var i=0;i<e.length;i++){var s=new Image;s.onload=function(){var e=t.preloadImages.list.indexOf(this);-1!==e&&t.preloadImages.splice(e,1)},t.preloadImages.list.push(s),s.src=e[i]}return this},auto:function(e){var t=this;return t.timer=setInterval(function(){t.iAuto++,t.iAuto>=t.images.length&&(t.iAuto=0),t.switchFrame(t.iAuto)},e),this},dragInteraction:function(){var e=this,t=!1;return document.ondragstart=function(){return!1},e.$cursor.on("mousedown mouseup",function(e){e.preventDefault(),t=t||"mousedown"!==e.type?!1:!0}),e.$el.on("mousemove",function(i){i.preventDefault(),t&&e.play(i.clientX-e.elPos.left)}),this},hoverInteraction:function(){var e=this;return e.$el.on("mousemove",function(t){e.play(t.pageX-e.elPos.left)}),this},touchInteraction:function(){var t=this;return t.$el.on("touchstart touchend",function(e){t.touchOnThis="touchstart"===e.type?!0:!1}),e(window).on("touchmove",function(e){var i=e.originalEvent;t.touchOnThis&&(i.preventDefault(),t.play(i.pageX-t.elPos.left))}),this},hover:function(){var t=this;return e("body").on("mousemove",function(e){e.pageX>=t.elPos.left&&e.pageX<=t.elPos.left+t.elWidth&&e.pageY>=t.elPos.top&&e.pageY<=t.elPos.top+t.elHeight?(t.$cursor&&t.$cursor.css({left:e.pageX-t.elPos.left,top:e.pageY-t.elPos.top}),t.isActive||(t.$el.addClass("active"),t.isActive=!0)):(t.$cursor&&t.$cursor.removeAttr("style"),t.isActive&&(t.$el.removeClass("active"),t.isActive=!1))}),this},resize:function(){var t=this;return e(window).on("resize",function(){t.elWidth=t.$el.width(),t.elHeight=t.$el.height(),t.elPos=t.$el.offset()}),this},play:function(e){var t=this;return t.switchFrame(Math.floor(e/(Math.round(t.elWidth/t.images.length*100)/100))),this},switchFrame:function(e){var t=this;return e!==t.oldFrame&&e<=t.images.length-1&&t.$image.attr({src:t.images[e]}),t.oldFrame=e,this}},e.fn.gifscratcher=function(i){var s;return(s=this.data("gifscratcher"))?i===!0?s:("string"===e.type(i)&&s[i](),this):this.each(function(){return e(this).data("gifscratcher",new t(this,i))})},e.fn.gifscratcher.defaults={images:[],speed:10,drag:!1,auto:!1}}(jQuery);