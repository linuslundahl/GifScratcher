!function(e){"use strict";var t=function(e,t){this.init(e,t)};t.prototype={init:function(t,s){var i=this;if(i.settings=e.extend(e.fn.gifscratcher.defaults,s),i.preloadImages=[],i.$el=e(t),i.$image=i.$el.find("img"),i.elWidth=0,i.elHeight=0,i.elPos=i.$el.offset(),i.iAuto=0,i.oldFrame=0,i.touchOnThis=!1,i.isHovering=!1,i.stopOnHover=!1,i.stoppedByHover=!1,i.$image.load(function(){i.elWidth=i.$el.width(),i.elHeight=i.$el.height()}),i.settings.images)if(i.$el.addClass("gifscratcher"),i.$image.addClass("gs-img"),i.preload().resize().hover(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))i.touchInteraction();else switch("auto"===i.settings.interaction&&(i.settings.cursor=!1),i.addCursor(),i.settings.interaction){case"hover":i.hoverInteraction();break;case"drag":i.dragInteraction();break;case"auto":i.auto();break;case"autoWithHover":i.stopOnHover=!0,i.auto().hoverInteraction();break;case"autoWithDrag":i.stopOnHover=!0,i.auto().dragInteraction()}return this},addCursor:function(){var t=this;return t.settings.cursor&&(t.$el.addClass("has-gs-cursor"),t.$cursor=e("<div></div>").addClass("gs-cursor").appendTo(t.$el)),this},preload:function(){var e=this;e.preloadImages.list||(e.preloadImages.list=[]);for(var t=0;t<e.settings.images.length;t++){var s=new Image;s.onload=function(){var t=e.preloadImages.list.indexOf(this);-1!==t&&e.preloadImages.splice(t,1)},e.preloadImages.list.push(s),s.src=e.settings.images[t]}return this},touchInteraction:function(){var t=this;return t.$image.addClass("gs-touch"),t.$el.on("touchstart touchend",function(e){t.touchOnThis="touchstart"===e.type?!0:!1}),e(window).on("touchmove",function(e){var s=e.originalEvent;t.touchOnThis&&(s.preventDefault(),t.play(s.pageX-t.elPos.left))}),this},hoverInteraction:function(){var e=this;return e.$image.addClass("gs-hover"),e.$el.on("mousemove",function(t){e.play(t.pageX-e.elPos.left)}),this},dragInteraction:function(){var e=this,t=!1;return e.$image.addClass("gs-drag"),document.ondragstart=function(){return!1},e.$cursor.on("mousedown mouseup",function(e){e.preventDefault(),t=t||"mousedown"!==e.type?!1:!0}),e.$el.on("mousemove",function(s){s.preventDefault(),t&&e.play(s.clientX-e.elPos.left)}),this},auto:function(){var e=this;return e.$image.addClass("gs-auto"),e.timer=setInterval(function(){e.stopOnHover&&e.isHovering&&(e.stoppedByHover=!0,window.clearTimeout(e.timer)),e.iAuto++,e.iAuto>=e.settings.images.length&&(e.iAuto=0),e.switchFrame(e.iAuto)},e.settings.speed),this},hover:function(){var t=this;return e("body").on("mousemove",function(e){e.pageX>=t.elPos.left&&e.pageX<=t.elPos.left+t.elWidth&&e.pageY>=t.elPos.top&&e.pageY<=t.elPos.top+t.elHeight?(t.$cursor&&t.$cursor.css({left:e.pageX-t.elPos.left,top:e.pageY-t.elPos.top}),t.isHovering||(t.$el.addClass("active"),t.isHovering=!0)):(t.$cursor&&t.$cursor.removeAttr("style"),t.isHovering&&(t.$el.removeClass("active"),t.isHovering=!1,t.stoppedByHover&&(t.iAuto=t.oldFrame,t.auto(),t.stoppedByHover=!1)))}),this},resize:function(){var t=this;return e(window).on("resize",function(){t.elWidth=t.$el.width(),t.elHeight=t.$el.height(),t.elPos=t.$el.offset()}),this},play:function(e){var t=this;return t.switchFrame(Math.floor(e/(Math.round(t.elWidth/t.settings.images.length*100)/100))),this},switchFrame:function(e){var t=this;return e!==t.oldFrame&&e<=t.settings.images.length-1&&t.$image.attr({src:t.settings.images[e]}),t.oldFrame=e,this}},e.fn.gifscratcher=function(s){var i;return(i=this.data("gifscratcher"))?s===!0?i:("string"===e.type(s)&&i[s](),this):this.each(function(){return e(this).data("gifscratcher",new t(this,s))})},e.fn.gifscratcher.defaults={images:[],interaction:"hover",cursor:!0,speed:30}}(jQuery);