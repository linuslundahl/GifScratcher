!function(e){"use strict";var t=function(e,t){this.init(e,t)};t.prototype={init:function(t,i){var r=this;if(r.settings=e.extend(e.fn.gifscratcher.defaults,i),r.images=r.settings.images,r.preloadImages=[],r.$el=e(t),r.$image=r.$el.find("img"),r.elWidth=0,r.elHeight=0,r.elPos=r.$el.offset(),r.iAuto=0,r.oldFrame=0,r.touchOnThis=!1,r.isActive=!1,r.$image.load(function(){r.elWidth=r.$el.width(),r.elHeight=r.$el.height()}),r.images)if(r.$el.addClass("gifscratcher"),r.$image.addClass("gifscratcher-img"),r.preload(),r.resize(),r.hover(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))r.touchInteraction();else switch(r.settings.interaction){case"hover":r.addCursor(),r.hoverInteraction();break;case"drag":r.addCursor(),r.dragInteraction();break;case"auto":r.auto()}return this},addCursor:function(){var t=this;return t.$cursor=e("<div></div>").addClass("gifscratcher-cursor").appendTo(t.$el),this},preload:function(){var e=this;e.preloadImages.list||(e.preloadImages.list=[]);for(var t=0;t<e.images.length;t++){var i=new Image;i.onload=function(){var t=e.preloadImages.list.indexOf(this);-1!==t&&e.preloadImages.splice(t,1)},e.preloadImages.list.push(i),i.src=e.images[t]}return this},touchInteraction:function(){var t=this;return t.$image.addClass("gifscratcher-touch"),t.$el.on("touchstart touchend",function(e){t.touchOnThis="touchstart"===e.type?!0:!1}),e(window).on("touchmove",function(e){var i=e.originalEvent;t.touchOnThis&&(i.preventDefault(),t.play(i.pageX-t.elPos.left))}),this},hoverInteraction:function(){var e=this;return e.$image.addClass("gifscratcher-hover"),e.$el.on("mousemove",function(t){e.play(t.pageX-e.elPos.left)}),this},dragInteraction:function(){var e=this,t=!1;return e.$image.addClass("gifscratcher-drag"),document.ondragstart=function(){return!1},e.$cursor.on("mousedown mouseup",function(e){e.preventDefault(),t=t||"mousedown"!==e.type?!1:!0}),e.$el.on("mousemove",function(i){i.preventDefault(),t&&e.play(i.clientX-e.elPos.left)}),this},auto:function(){var e=this;return e.$image.addClass("gifscratcher-auto"),e.timer=setInterval(function(){e.iAuto++,e.iAuto>=e.images.length&&(e.iAuto=0),e.switchFrame(e.iAuto)},e.settings.speed),this},hover:function(){var t=this;return e("body").on("mousemove",function(e){e.pageX>=t.elPos.left&&e.pageX<=t.elPos.left+t.elWidth&&e.pageY>=t.elPos.top&&e.pageY<=t.elPos.top+t.elHeight?(t.$cursor&&t.$cursor.css({left:e.pageX-t.elPos.left,top:e.pageY-t.elPos.top}),t.isActive||(t.$el.addClass("active"),t.isActive=!0)):(t.$cursor&&t.$cursor.removeAttr("style"),t.isActive&&(t.$el.removeClass("active"),t.isActive=!1))}),this},resize:function(){var t=this;return e(window).on("resize",function(){t.elWidth=t.$el.width(),t.elHeight=t.$el.height(),t.elPos=t.$el.offset()}),this},play:function(e){var t=this;return t.switchFrame(Math.floor(e/(Math.round(t.elWidth/t.images.length*100)/100))),this},switchFrame:function(e){var t=this;return e!==t.oldFrame&&e<=t.images.length-1&&t.$image.attr({src:t.images[e]}),t.oldFrame=e,this}},e.fn.gifscratcher=function(i){var r;return(r=this.data("gifscratcher"))?i===!0?r:("string"===e.type(i)&&r[i](),this):this.each(function(){return e(this).data("gifscratcher",new t(this,i))})},e.fn.gifscratcher.defaults={images:[],interaction:"hover",speed:10}}(jQuery);